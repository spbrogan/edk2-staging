# File templates/basetools-build-job.yml
#
# template file to build basetools
#
# Copyright (c) 2019, Microsoft Corporation
# SPDX-License-Identifier: BSD-2-Clause-Patent
##
parameters:
  tool_chain_tag: ''

steps:
- ${{ if contains(parameters.tool_chain_tag, 'GCC') }}:
  - bash: sudo apt-get update
    displayName: Update apt
    condition: and(gt(variables.pkg_count, 0), succeeded())

  - bash: sudo apt-get install gcc g++ make uuid-dev
    displayName: Install required tools
    condition: and(gt(variables.pkg_count, 0), succeeded())

- task: CmdLine@1
  displayName: Build Tool
  inputs:
    filename: python
    arguments: Basetools/Edk2ToolsBuild.py -t ${{ parameters.tool_chain_tag }} 
  condition: and(gt(variables.pkg_count, 0), succeeded())
